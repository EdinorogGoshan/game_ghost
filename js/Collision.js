class CollisionSystem {
    // Статический класс - не создаем экземпляры,
    // используем методы напрямую: CollisionSystem.checkPlatformCollision(...)
    // статчный класс, потому что:
    // 1. не нужно хранить состояние
    // 2. все методы - чистые функции (не изменяют внешние данные)
    // 3. удобно для организации утилитных функций
    static checkPlatformCollision(player, platform) {
        // Проверяет столкновение игрока с ВЕРХОМ платформы
    
        // 1. Условие: игрок падает ВНИЗ (velocityY >= 0)
        //    velocityY > 0 - падает
        //    velocityY = 0 - стоит/движется горизонтально
        //    velocityY < 0 - прыгает вверх (не проверяем)
        if (player.velocityY >= 0 &&
            // 2. Горизонтальное пересечение (с отступами 5px):
            //    Правая сторона игрока > левая сторона платформы + 5px
            player.x + player.width > platform.x + 5 &&
            //    Левая сторона игрока < правая сторона платформы - 5px
            player.x < platform.x + platform.width - 5 &&
            // 3. Игрок находится ВЫШЕ платформы:
            //    Ноги игрока (y + height) <= верх платформы + 15px
            //    +15px дает небольшой "запас" для мягкого приземления
            player.y + player.height <= platform.y + 15 &&
            // 4. В следующем кадре игрок будет НА или НИЖЕ платформы:
            //    Текущая позиция ног + скорость >= верх платформы - 5px
            //    -5px позволяет "зацепиться" даже если немного не долетел
            player.y + player.height + player.velocityY >= platform.y - 5) {
            
            // все условия выполнены = столкновение
            return { 
                collides: true,     // факт столкновения
                side: 'top'         // с какой стороны столкнулись
            };
        }
        
        // нет столкновения
        return { collides: false };
    }
}